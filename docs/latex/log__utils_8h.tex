\hypertarget{log__utils_8h}{}\doxysection{inc/log\+\_\+utils.h File Reference}
\label{log__utils_8h}\index{inc/log\_utils.h@{inc/log\_utils.h}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$actuators.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
Include dependency graph for log\+\_\+utils.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=291pt]{log__utils_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{log__utils_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{log__utils_8h_acf303e3f3f7d320a1113be573509bb63}{log\+\_\+event}} (const char $\ast$id\+\_\+aeb, uint32\+\_\+t event\+\_\+id, \mbox{\hyperlink{structactuators__abstraction}{actuators\+\_\+abstraction}} actuators)
\begin{DoxyCompactList}\small\item\em Logs an event to a file with a timestamp and actuator data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{log__utils_8h_acf303e3f3f7d320a1113be573509bb63}\label{log__utils_8h_acf303e3f3f7d320a1113be573509bb63}} 
\index{log\_utils.h@{log\_utils.h}!log\_event@{log\_event}}
\index{log\_event@{log\_event}!log\_utils.h@{log\_utils.h}}
\doxysubsubsection{\texorpdfstring{log\_event()}{log\_event()}}
{\footnotesize\ttfamily void log\+\_\+event (\begin{DoxyParamCaption}\item[{const char $\ast$}]{id\+\_\+aeb,  }\item[{uint32\+\_\+t}]{event\+\_\+id,  }\item[{\mbox{\hyperlink{structactuators__abstraction}{actuators\+\_\+abstraction}}}]{actuators }\end{DoxyParamCaption})}



Logs an event to a file with a timestamp and actuator data. 

This function logs an event by appending it to a log file. It records the event ID, the timestamp (in milliseconds), and actuator states in a structured format.


\begin{DoxyParams}{Parameters}
{\em id\+\_\+aeb} & Identifier for the AEB system. \\
\hline
{\em event\+\_\+id} & The unique event identifier (formatted as a hexadecimal string). \\
\hline
{\em actuators} & Structure containing actuator state information. \\
\hline
\end{DoxyParams}


Definition at line 18 of file log\+\_\+utils.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{18                                                                                        \{}
\DoxyCodeLine{19     FILE *log\_file = fopen(\textcolor{stringliteral}{"{}log/log.txt"{}}, \textcolor{stringliteral}{"{}a"{}});}
\DoxyCodeLine{20     \textcolor{keywordflow}{if} (log\_file == NULL) \{}
\DoxyCodeLine{21         perror(\textcolor{stringliteral}{"{}Error opening log file"{}});}
\DoxyCodeLine{22         \textcolor{keywordflow}{return};}
\DoxyCodeLine{23     \}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25     \textcolor{comment}{// Getting the timestamp instead just the date, because it's more useful (miliseconds)}}
\DoxyCodeLine{26     \textcolor{keyword}{struct }timespec ts;}
\DoxyCodeLine{27     clock\_gettime(CLOCK\_REALTIME, \&ts);}
\DoxyCodeLine{28     \textcolor{keywordtype}{long} timestamp\_ms = ts.tv\_sec * 1000 + ts.tv\_nsec / 1000000;}
\DoxyCodeLine{29 }
\DoxyCodeLine{30     \textcolor{comment}{// Convert id to hexadecimal string}}
\DoxyCodeLine{31     \textcolor{keywordtype}{char} event\_id\_str[9]; \textcolor{comment}{// 8 caracteres + '\(\backslash\)0'}}
\DoxyCodeLine{32     snprintf(event\_id\_str, \textcolor{keyword}{sizeof}(event\_id\_str), \textcolor{stringliteral}{"{}\%08X"{}}, event\_id);}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{comment}{// Write in file in desired format}}
\DoxyCodeLine{35     fprintf(log\_file, \textcolor{stringliteral}{"{}[\%s][\%s][T:\%07ld] WARNING | \%d | \%d | \%d | \%d | \%d\(\backslash\)n"{}},}
\DoxyCodeLine{36             id\_aeb,}
\DoxyCodeLine{37             event\_id\_str,}
\DoxyCodeLine{38             timestamp\_ms,}
\DoxyCodeLine{39             actuators.\mbox{\hyperlink{structactuators__abstraction_ab7331b3769446808c60936da59a1e3d9}{belt\_tightness}},}
\DoxyCodeLine{40             actuators.\mbox{\hyperlink{structactuators__abstraction_a68e97e44238339a9011a5a1bea267444}{door\_lock}},}
\DoxyCodeLine{41             actuators.\mbox{\hyperlink{structactuators__abstraction_ae99ee78e0fedfcef438eca8b2a3e8964}{should\_activate\_abs}},}
\DoxyCodeLine{42             actuators.\mbox{\hyperlink{structactuators__abstraction_ab6e6f15280e566ecf86f06a780cb94a7}{alarm\_led}},}
\DoxyCodeLine{43             actuators.\mbox{\hyperlink{structactuators__abstraction_afd5b1185a961b17a79fe4fb45a65baa9}{alarm\_buzzer}});}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     fclose(log\_file);}
\DoxyCodeLine{46 \}}

\end{DoxyCode}
