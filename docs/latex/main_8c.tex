\hypertarget{main_8c}{}\doxysection{src/main.c File Reference}
\label{main_8c}\index{src/main.c@{src/main.c}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$mqueue.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}mq\+\_\+utils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}constants.\+h\char`\"{}}\newline
Include dependency graph for main.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{main_8c_a019dfd8a35a919a35cc9e52bb46962ae}{wait\+\_\+terminate\+\_\+execution}} ()
\item 
void \mbox{\hyperlink{main_8c_a8c3fd0b337ed4fd4c8128b4070e54a82}{terminate\+\_\+execution}} (int sig)
\item 
pid\+\_\+t \mbox{\hyperlink{main_8c_a29f87724a37fd751f8eb5b33ebb1ad83}{create\+\_\+processes}} (char $\ast$process\+\_\+name)
\item 
int \mbox{\hyperlink{main_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
mqd\+\_\+t \mbox{\hyperlink{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}{sensors\+\_\+mq}}
\item 
mqd\+\_\+t \mbox{\hyperlink{main_8c_a888ff70e2de4c8fbaedc5134dbe2a441}{actuators\+\_\+mq}}
\item 
pid\+\_\+t \mbox{\hyperlink{main_8c_a349c3dd4e74a386448349fd7801b3624}{sensors\+\_\+pid}}
\item 
pid\+\_\+t \mbox{\hyperlink{main_8c_ac2dda5a2c9f4861aa3499c4e113517e3}{controller\+\_\+pid}}
\item 
pid\+\_\+t \mbox{\hyperlink{main_8c_ac2cc1c1a13d42169bed13bf8140c4dcb}{actuators\+\_\+pid}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{main_8c_a29f87724a37fd751f8eb5b33ebb1ad83}\label{main_8c_a29f87724a37fd751f8eb5b33ebb1ad83}} 
\index{main.c@{main.c}!create\_processes@{create\_processes}}
\index{create\_processes@{create\_processes}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{create\_processes()}{create\_processes()}}
{\footnotesize\ttfamily pid\+\_\+t create\+\_\+processes (\begin{DoxyParamCaption}\item[{char $\ast$}]{process\+\_\+name }\end{DoxyParamCaption})}



Definition at line 49 of file main.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{50 \{}
\DoxyCodeLine{51     pid\_t child\_pid = fork();}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{keywordflow}{if}(child\_pid < 0)}
\DoxyCodeLine{54     \{}
\DoxyCodeLine{55         perror(\textcolor{stringliteral}{"{}Error creating auxiliary process \(\backslash\)n"{}});}
\DoxyCodeLine{56         exit(1);}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(child\_pid == 0)}
\DoxyCodeLine{59     \{}
\DoxyCodeLine{60         \textcolor{keywordflow}{if} (execl(process\_name, process\_name, NULL) == -\/1) }
\DoxyCodeLine{61         \{}
\DoxyCodeLine{62             perror(\textcolor{stringliteral}{"{}Error executing the process"{}});}
\DoxyCodeLine{63             exit(1);}
\DoxyCodeLine{64         \}}
\DoxyCodeLine{65     \}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keywordflow}{return} child\_pid;}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \}}

\end{DoxyCode}
\mbox{\Hypertarget{main_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}\label{main_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
\index{main.c@{main.c}!main@{main}}
\index{main@{main}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 71 of file main.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{72 \{}
\DoxyCodeLine{73     printf(\textcolor{stringliteral}{"{}Main process PID: \%d\(\backslash\)n"{}}, getpid());}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \textcolor{comment}{//Initialize resources}}
\DoxyCodeLine{76     \mbox{\hyperlink{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}{sensors\_mq}} = \mbox{\hyperlink{mq__utils_8c_a95f00e4196a05f378c2656be620edfcf}{create\_mq}}(\mbox{\hyperlink{constants_8h_aab9d8e700a34c08a7d8bca1d5a2d31a5}{SENSORS\_MQ}});}
\DoxyCodeLine{77     \mbox{\hyperlink{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}{sensors\_mq}} = \mbox{\hyperlink{mq__utils_8c_a95f00e4196a05f378c2656be620edfcf}{create\_mq}}(\mbox{\hyperlink{constants_8h_ab70848171cb403eb07c6f9e1fecdccd7}{ACTUATORS\_MQ}});}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     \textcolor{comment}{//Create auxiliary processes}}
\DoxyCodeLine{80     \textcolor{keywordtype}{char} *sensors\_process = \textcolor{stringliteral}{"{}./bin/sensors\_bin"{}};}
\DoxyCodeLine{81     \textcolor{keywordtype}{char} *controller\_process = \textcolor{stringliteral}{"{}./bin/aeb\_controller\_bin"{}};}
\DoxyCodeLine{82     \textcolor{keywordtype}{char} *actuators\_process = \textcolor{stringliteral}{"{}./bin/actuators\_bin"{}};}
\DoxyCodeLine{83 }
\DoxyCodeLine{84     \mbox{\hyperlink{main_8c_a349c3dd4e74a386448349fd7801b3624}{sensors\_pid}} = \mbox{\hyperlink{main_8c_a29f87724a37fd751f8eb5b33ebb1ad83}{create\_processes}}(sensors\_process);}
\DoxyCodeLine{85     \mbox{\hyperlink{main_8c_ac2dda5a2c9f4861aa3499c4e113517e3}{controller\_pid}} = \mbox{\hyperlink{main_8c_a29f87724a37fd751f8eb5b33ebb1ad83}{create\_processes}}(controller\_process);}
\DoxyCodeLine{86     \mbox{\hyperlink{main_8c_ac2cc1c1a13d42169bed13bf8140c4dcb}{actuators\_pid}} = \mbox{\hyperlink{main_8c_a29f87724a37fd751f8eb5b33ebb1ad83}{create\_processes}}(actuators\_process);}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     signal(SIGINT, \mbox{\hyperlink{main_8c_a8c3fd0b337ed4fd4c8128b4070e54a82}{terminate\_execution}});}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \mbox{\hyperlink{main_8c_a019dfd8a35a919a35cc9e52bb46962ae}{wait\_terminate\_execution}}();}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{keywordflow}{return} EXIT\_SUCCESS;}
\DoxyCodeLine{93 \}}

\end{DoxyCode}
\mbox{\Hypertarget{main_8c_a8c3fd0b337ed4fd4c8128b4070e54a82}\label{main_8c_a8c3fd0b337ed4fd4c8128b4070e54a82}} 
\index{main.c@{main.c}!terminate\_execution@{terminate\_execution}}
\index{terminate\_execution@{terminate\_execution}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{terminate\_execution()}{terminate\_execution()}}
{\footnotesize\ttfamily void terminate\+\_\+execution (\begin{DoxyParamCaption}\item[{int}]{sig }\end{DoxyParamCaption})}



Definition at line 28 of file main.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{29 \{}
\DoxyCodeLine{30     printf(\textcolor{stringliteral}{"{}Closing message queue\(\backslash\)n"{}});}
\DoxyCodeLine{31     \mbox{\hyperlink{mq__utils_8c_a504ce44e1f28de45ad533aebf4f83517}{close\_mq}}(\mbox{\hyperlink{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}{sensors\_mq}}, \mbox{\hyperlink{constants_8h_aab9d8e700a34c08a7d8bca1d5a2d31a5}{SENSORS\_MQ}});}
\DoxyCodeLine{32     \mbox{\hyperlink{mq__utils_8c_a504ce44e1f28de45ad533aebf4f83517}{close\_mq}}(\mbox{\hyperlink{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}{sensors\_mq}}, \mbox{\hyperlink{constants_8h_ab70848171cb403eb07c6f9e1fecdccd7}{ACTUATORS\_MQ}});}
\DoxyCodeLine{33 }
\DoxyCodeLine{34 }
\DoxyCodeLine{35     printf(\textcolor{stringliteral}{"{}Closing child processes\(\backslash\)n"{}});}
\DoxyCodeLine{36     kill(\mbox{\hyperlink{main_8c_a349c3dd4e74a386448349fd7801b3624}{sensors\_pid}}, SIGTERM);}
\DoxyCodeLine{37     kill(\mbox{\hyperlink{main_8c_ac2dda5a2c9f4861aa3499c4e113517e3}{controller\_pid}}, SIGTERM);}
\DoxyCodeLine{38     kill(\mbox{\hyperlink{main_8c_ac2cc1c1a13d42169bed13bf8140c4dcb}{actuators\_pid}}, SIGTERM);}
\DoxyCodeLine{39 }
\DoxyCodeLine{40     waitpid(\mbox{\hyperlink{main_8c_a349c3dd4e74a386448349fd7801b3624}{sensors\_pid}}, NULL, 0);}
\DoxyCodeLine{41     waitpid(\mbox{\hyperlink{main_8c_ac2dda5a2c9f4861aa3499c4e113517e3}{controller\_pid}}, NULL, 0);}
\DoxyCodeLine{42     waitpid(\mbox{\hyperlink{main_8c_ac2cc1c1a13d42169bed13bf8140c4dcb}{actuators\_pid}}, NULL, 0);}
\DoxyCodeLine{43 }
\DoxyCodeLine{44     printf(\textcolor{stringliteral}{"{}Execution terminated\(\backslash\)n"{}});}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     exit(0);}
\DoxyCodeLine{47 \}}

\end{DoxyCode}
\mbox{\Hypertarget{main_8c_a019dfd8a35a919a35cc9e52bb46962ae}\label{main_8c_a019dfd8a35a919a35cc9e52bb46962ae}} 
\index{main.c@{main.c}!wait\_terminate\_execution@{wait\_terminate\_execution}}
\index{wait\_terminate\_execution@{wait\_terminate\_execution}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{wait\_terminate\_execution()}{wait\_terminate\_execution()}}
{\footnotesize\ttfamily void wait\+\_\+terminate\+\_\+execution (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 13 of file main.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{14 \{}
\DoxyCodeLine{15 }
\DoxyCodeLine{16     waitpid(\mbox{\hyperlink{main_8c_a349c3dd4e74a386448349fd7801b3624}{sensors\_pid}}, NULL, 0);}
\DoxyCodeLine{17     waitpid(\mbox{\hyperlink{main_8c_ac2dda5a2c9f4861aa3499c4e113517e3}{controller\_pid}}, NULL, 0);}
\DoxyCodeLine{18     waitpid(\mbox{\hyperlink{main_8c_ac2cc1c1a13d42169bed13bf8140c4dcb}{actuators\_pid}}, NULL, 0);}
\DoxyCodeLine{19 }
\DoxyCodeLine{20     printf(\textcolor{stringliteral}{"{}Closing message queue\(\backslash\)n"{}});}
\DoxyCodeLine{21     \mbox{\hyperlink{mq__utils_8c_a504ce44e1f28de45ad533aebf4f83517}{close\_mq}}(\mbox{\hyperlink{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}{sensors\_mq}}, \mbox{\hyperlink{constants_8h_aab9d8e700a34c08a7d8bca1d5a2d31a5}{SENSORS\_MQ}});}
\DoxyCodeLine{22     \mbox{\hyperlink{mq__utils_8c_a504ce44e1f28de45ad533aebf4f83517}{close\_mq}}(\mbox{\hyperlink{main_8c_a888ff70e2de4c8fbaedc5134dbe2a441}{actuators\_mq}}, \mbox{\hyperlink{constants_8h_ab70848171cb403eb07c6f9e1fecdccd7}{ACTUATORS\_MQ}});}
\DoxyCodeLine{23 }
\DoxyCodeLine{24     exit(0);}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{main_8c_a888ff70e2de4c8fbaedc5134dbe2a441}\label{main_8c_a888ff70e2de4c8fbaedc5134dbe2a441}} 
\index{main.c@{main.c}!actuators\_mq@{actuators\_mq}}
\index{actuators\_mq@{actuators\_mq}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{actuators\_mq}{actuators\_mq}}
{\footnotesize\ttfamily mqd\+\_\+t actuators\+\_\+mq}



Definition at line 10 of file main.\+c.

\mbox{\Hypertarget{main_8c_ac2cc1c1a13d42169bed13bf8140c4dcb}\label{main_8c_ac2cc1c1a13d42169bed13bf8140c4dcb}} 
\index{main.c@{main.c}!actuators\_pid@{actuators\_pid}}
\index{actuators\_pid@{actuators\_pid}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{actuators\_pid}{actuators\_pid}}
{\footnotesize\ttfamily pid\+\_\+t actuators\+\_\+pid}



Definition at line 11 of file main.\+c.

\mbox{\Hypertarget{main_8c_ac2dda5a2c9f4861aa3499c4e113517e3}\label{main_8c_ac2dda5a2c9f4861aa3499c4e113517e3}} 
\index{main.c@{main.c}!controller\_pid@{controller\_pid}}
\index{controller\_pid@{controller\_pid}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{controller\_pid}{controller\_pid}}
{\footnotesize\ttfamily pid\+\_\+t controller\+\_\+pid}



Definition at line 11 of file main.\+c.

\mbox{\Hypertarget{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}\label{main_8c_a074b0ef9bc31934bbf9b2b54e9e9aa43}} 
\index{main.c@{main.c}!sensors\_mq@{sensors\_mq}}
\index{sensors\_mq@{sensors\_mq}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{sensors\_mq}{sensors\_mq}}
{\footnotesize\ttfamily mqd\+\_\+t sensors\+\_\+mq}



Definition at line 10 of file main.\+c.

\mbox{\Hypertarget{main_8c_a349c3dd4e74a386448349fd7801b3624}\label{main_8c_a349c3dd4e74a386448349fd7801b3624}} 
\index{main.c@{main.c}!sensors\_pid@{sensors\_pid}}
\index{sensors\_pid@{sensors\_pid}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{sensors\_pid}{sensors\_pid}}
{\footnotesize\ttfamily pid\+\_\+t sensors\+\_\+pid}



Definition at line 11 of file main.\+c.

